# Ground Truth Validation - Environment Configuration
# 
# 将此文件复制为 .env 并填入实际值
# 使用方法: source .env 或通过 Airflow 的 Environment Variables 配置

# ============================================================
# MySQL 连接配置（DataLog 开发库）
# ============================================================
export DATALOG_CONN_ID="datalog_mysql_conn"

# ============================================================
# InfluxDB 配置（物理层真相）
# ============================================================
export INFLUX_URL="http://10.105.66.20:8086"
export INFLUX_TOKEN="your_influxdb_token_here"
export INFLUX_ORG="your_organization"
export INFLUX_BUCKET="vehicle_telemetry"

# InfluxDB 查询超时（毫秒）
export INFLUX_TIMEOUT=30000

# ============================================================
# Map API 配置（语义层真相）
# ============================================================
export MAP_API_URL="http://10.105.66.20:1234/api/v1/annotate/batch"
export MAP_PORT="AQCTMap_20251121V1.0"

# Map API 请求超时（秒）
export MAP_API_TIMEOUT=30

# 是否启用 Map API 缓存
export MAP_API_USE_CACHE=true

# ============================================================
# 验证规则配置
# ============================================================
# 静止阈值（米/秒），超过此速度视为非静止状态
export MAX_SPEED_FOR_STATIONARY=0.5

# ============================================================
# Controller 配置（如需调整）
# ============================================================
# 分片大小（每组车辆数，范围 5-10）
export DQ_VEHICLE_SHARD_SIZE=8

# Controller 轮询间隔（分钟）
# 注意：此值在 DAG 定义中已硬编码为 30 分钟，此处仅供参考
# export DQ_CONTROLLER_SCHEDULE="*/30 * * * *"

# ============================================================
# Airflow 配置
# ============================================================
# 如需覆盖 Airflow 默认配置，可在此设置
# export AIRFLOW__CORE__PARALLELISM=32
# export AIRFLOW__CORE__DAG_CONCURRENCY=16
# export AIRFLOW__CORE__MAX_ACTIVE_RUNS_PER_DAG=16

# ============================================================
# 调试模式
# ============================================================
# 启用详细日志
export AIRFLOW__LOGGING__LOGGING_LEVEL=INFO

# 限制 SQL 查询行数（用于开发/测试，生产环境应删除）
# export CNT_CYCLES_SQL_LIMIT=1000

# ============================================================
# 使用说明
# ============================================================
# 1. 复制此文件为 .env:
#    cp config_ground_truth.env .env
#
# 2. 填入实际配置值（替换 your_*_here）
#
# 3. 加载环境变量:
#    source .env
#
# 4. 或在 Airflow UI 中配置:
#    Admin > Variables / Connections
#
# 5. 验证配置:
#    echo $INFLUX_TOKEN
#    echo $MAP_API_URL

